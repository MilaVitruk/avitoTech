## Тесткейсы API

___

## 1. Получить объявление по id
Создать объявление (отправить POST запрос c JSON типа:

            {
                "name": "<string>",
                "price": "<integer>",
                "sellerId": "<integer>",
                "statistics": {}
            }
на
https://qa-internship.avito.com/api/1/item)  
Распарсить JSON-ответ, получить id объявления  
Отправить GET запрос на
https://qa-internship.avito.com/api/1/item/:id  

| №   | Шаги                                              | Тестовые данные                         | Ожидаемый результат |
|-----|---------------------------------------------------|-----------------------------------------|---------------------|
| 1.1 | Проверить статус-код при валидном id              | id                                      | Статус-код 200      |
| 1.2 | Сравнить id передаваемый в get-запрос id в ответе | id                                      | Равенство id        |
| 1.3 | Проверить структуру JSON-ответа                   | id                                      | JSON Типа*          |
| 1.4 | Проверить статус-код при невалидном id            | id < 0, id = "", id.type() == int, None | Статус-код 400      |
| 1.5 | Проверить статус-код при несуществующем id        | несуществующий id                       | Статус-код 404      |
| 1.6 | Проверить структуру JSON-ответа                   | несуществующий id                       | JSON Типа**         |
| 1.7 | Проверить структуру JSON-ответа                   | id.type() == int                        | JSON Типа**         |
| 1.8 | Вызов запроса с некорректным методом (DELETE)     | method = DELETE, id                     | Статус-код 405      |
| 1.9 | Вызов запроса с некорректным методом (POST)       | method = POST, id                       | Статус-код 405      |

*Ожидаемый формат JSON-ответа для теста 1.3  

        [{
            "id": "<string>",
            "sellerId": "<integer>",
            "name": "<string>",
            "price": "<integer>",
            "statistics": {
            "likes": "<integer>",
            "viewCount": "<integer>",
            "contacts": "<integer>"
            },
            "createdAt": "<string>"
        }
            ]

** Ожидаемый формат JSON-ответа для тестов 1.6, 1.7

    {
          "result": {
            "messages": {},
            "message": "<string>"
          },
          "status": "<string>"
        }


___
## 2. Получить все объявления по продавцам
Отправить GET запрос на
https://qa-internship.avito.com/api/1/:sellerID/item  

| №   | Название                                                                                     | Тестовые данные                                                                   | Ожидаемый результат |
|-----|----------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------|---------------------|
| 2.1 | Проверить статус-код при валидном sellerID                                                   | 111111 < sellerID: int < 999999                                                   | Статус-код 200      |
| 2.2 | Сравнить id продавца, переданный в get-запрос и id во всех объявлениях, найденных по запросу | 111111 < sellerID: int < 999999                                                   | Равенство id        |
| 2.3 | Проверить статус-код при невалидном id                                                       | sellerID < 0, sellerID < 111111,<br/> sellerID > 999999, sellerID.type() == str() | Статус-код 400      |
| 2.4 | Вызов запроса с некорректным методом (DELETE)                                                | method = DELETE, 111111 < sellerID: int < 999999                                  | Статус-код 405      |

___
## 3. Получить статистику по id
Отправить GET запрос на
https://qa-internship.avito.com/api/1/statistic/:id

| №   | Название                                                                                     | Тестовые данные                                | Ожидаемый результат            |
|-----|----------------------------------------------------------------------------------------------|------------------------------------------------|--------------------------------|
| 3.1 | Проверить статус-код при валидном id                                                         | id = valid_id                                  | Статус-код 200                 |
| 3.2 | Oтправить GET-запрос на https://qa-internship.avito.com/api/1/item/:id, <br/>cравнить ответы | id = valid_id                                  | data_1 == data_2['statistics'] |
| 3.3 | Проверить статус-код при невалидном id                                                       | 'teststringinput', None, '', 1234, "@#$%", -10 | Статус-код 400                 |
| 3.4 | Проверить структуру JSON-ответа при валидном id                                              | id = valid_id                                  | JSON Типа**                    |
| 3.5 | Проверить статус-код при неcуществующем id                                                   | id = not_existing                              | Статус код 404                 |
| 3.6 | Проверить структуру JSON-ответа при несуществующем id                                        | id = not_existing                              | JSON Типа**                    |
| 3.7 | Вызов запроса с некорректным методом (DELETE)                                                | method = DELETE, id = valid_id                 | Статус-код 405                 |
*Ожидаемый формат JSON-ответа для теста 3.4  

        [{
            "likes": "<integer>",
            "viewCount": "<integer>",
            "contacts": "<integer>"
            }
        ]

**Ожидаемый формат JSON-ответа для теста 3.6

    {
          "result": {
            "messages": {},
            "message": "<string>"
          },
          "status": "<string>"
        }

___
## 4. Сохранить объявления
Отправить POST-запрос c JSON типа:  

        {
            "name": "<string>",
            "price": "<integer>",
            "sellerId": "<integer>",
        }
на
https://qa-internship.avito.com/api/1/item
Получить ответ типа 

        {'status' : "<string>"}

| №    | Название                                                        | Тестовые данные                                                                       | Ожидаемый результат                                            |
|------|-----------------------------------------------------------------|---------------------------------------------------------------------------------------|----------------------------------------------------------------|
| 4.1  | Проверить структуру json-ответа при передаче валидных данных    |                                                                                       | {'status' : "\<string>"}                                       |
| 4.2  | Запросить методом GET объявление по cозданному ID               |                                                                                       | Статус-код 200                                                 |
| 4.3  | Сравнить значения ключа ['name']                                |                                                                                       | Равенство значений ключа ['name']                              |
| 4.4  | Сравнить значения ключа ['price']                               |                                                                                       | Равенство значений ключа ['price']                             |
| 4.5  | Сравнить значения ключа ['sellerID']                            |                                                                                       | Равенство значений ключа ['sellerID']                          |
| 4.6  | Сравнить значения ключа ['statistics'] в случае его добавления  | "statistics": {"contacts": 32,<br/> "likes": 35, "viewCount": 14}                     | "statistics":<br/> {"contacts": 0, "likes": 0, "viewCount": 0} |
| 4.7  | Ввести невалидные данные в значение ['name']                    | "name": [123, None, True, -10]                                                        | Статус-код 400                                                 |
| 4.8  | Ввести невалидные данные в значение ['price']                   | "price": [-1000, 0, None, True, "1234"]                                               | Статус-код 400                                                 |
| 4.9  | Ввести невалидные данные в значение ['sellerID']                | "sellerID": [-1000, 0, "\<integer>" < 111111, "\<integer>" > 999999, True, "123456" ] | Статус-код 400                                                 |
| 4.10 | Проверить структуру json-ответа при передаче не валидных данных |                                                                                       | JSON Типа**                                                    |

*При создании объявления стоит создавать ключ 'statistic' программно, а не оставлять на ввод пользователю. Для проведения остальных тестов было принято допущение, что "валидным" значением поля является пустой словарь.  
**Ожидаемый формат JSON-ответа для теста 4.10

        {
          "result": {
            "messages": {
              "nostrudffb": "<string>",
              "Ut__": "<string>"
            },
            "message": "<string>"
          },
          "status": "<string>"
        }

